# ========================================
# MCP DadosBR - Environment Variables
# ========================================
# Copy this file to .env for local development (do NOT commit .env)
# For CI/CD, configure these as GitHub Secrets

# ========================================
# Transport Configuration
# ========================================

# MCP Transport mode: stdio (default) or http
# - stdio: Standard I/O for local MCP clients (Claude Desktop, Cursor, etc.)
# - http: HTTP+SSE for remote connections
MCP_TRANSPORT=stdio

# HTTP server port (only used when MCP_TRANSPORT=http)
# Default: 3000
MCP_HTTP_PORT=3000

# ========================================
# Cache Configuration
# ========================================

# Maximum number of entries in cache
# Default: 256
MCP_CACHE_SIZE=256

# Cache TTL (Time To Live) in milliseconds
# Default: 60000 (1 minute)
MCP_CACHE_TTL=60000

# Enable background cleanup of expired cache entries
# Default: true
MCP_CACHE_BACKGROUND_CLEANUP=true

# ========================================
# API Configuration
# ========================================

# Timeout for external API requests in milliseconds
# Default: 8000 (8 seconds)
MCP_API_TIMEOUT=8000

# Timeout for intelligence search operations in milliseconds
# Default: 25000 (25 seconds)
MCP_INTELLIGENCE_TIMEOUT=25000

# Timeout for individual search requests in milliseconds
# Default: 10000 (10 seconds)
MCP_SEARCH_TIMEOUT=10000

# Concurrency limit for intelligence search queries
# Maximum number of search queries to run concurrently in cnpj_intelligence
# Lower values reduce API load but increase total time
# Higher values speed up searches but may hit rate limits
# Default: 3
MCP_INTELLIGENCE_CONCURRENCY=3

# Custom CNPJ API base URL (optional)
# Default: https://api.opencnpj.org/
# Allowed hosts: api.opencnpj.org, receitaws.com.br, brasilapi.com.br,
#                publica.cnpj.ws, minhareceita.org, localhost
CNPJ_API_BASE_URL=https://api.opencnpj.org/

# Custom CEP API base URL (optional)
# Default: https://opencep.com/v1/
# Allowed hosts: opencep.com, viacep.com.br, brasilapi.com.br,
#                cep.awesomeapi.com.br, localhost
CEP_API_BASE_URL=https://opencep.com/v1/

# ========================================
# Authentication (Optional)
# ========================================

# Custom API key header name
# Example: X-API-Key, Authorization, etc.
API_KEY_HEADER=X-API-Key

# Custom API key value
# Used for authenticating with custom CNPJ/CEP APIs
API_KEY_VALUE=your-custom-api-key-here

# ========================================
# Search Provider Configuration
# ========================================

# Tavily API key (REQUIRED for search features)
# Get your key at: https://tavily.com
# Used for: cnpj_search and cnpj_intelligence tools
TAVILY_API_KEY=tvly-your-api-key-here

# ========================================
# Cloudflare Workers Configuration
# ========================================

# Cloudflare API Token (required for deployment)
# Get from: https://dash.cloudflare.com/profile/api-tokens
# Permissions: Workers Scripts:Edit, Workers KV Storage:Edit
CLOUDFLARE_API_TOKEN=your-cloudflare-api-token-here

# Cloudflare Account ID (optional - already in wrangler.toml)
# Get from: wrangler whoami
CLOUDFLARE_ACCOUNT_ID=your-account-id-here

# API key for Cloudflare Workers endpoint (optional)
# Used to protect your deployed worker
MCP_API_KEY=your-worker-api-key-here

# Disable rate limiting on Cloudflare Workers (optional)
# Default: false (rate limiting enabled)
# Set to true only if you have other rate limiting in place
MCP_DISABLE_RATE_LIMIT=false

# ========================================
# Logging & Debugging
# ========================================

# Environment: development or production
# Default: production
# - production: Disables DEBUG logs, enables optimizations
# - development: Enables DEBUG logs, more verbose output
NODE_ENV=production

# Disable sequential thinking logs (optional)
# Default: false (logs enabled)
DISABLE_THOUGHT_LOGGING=false

# Log level: debug, info, warn, error
# Default: info
LOG_LEVEL=info

# ========================================
# Rate Limiting (Local HTTP Transport)
# ========================================

# Rate limit window in milliseconds
# Default: 60000 (1 minute)
RATE_LIMIT_WINDOW_MS=60000

# Maximum requests per window per IP
# Default: 30
RATE_LIMIT_MAX_REQUESTS=30

# ========================================
# Development & Testing
# ========================================

# Dry run mode - don't actually execute operations (testing only)
# Default: false
DRY_RUN=false

# Enable verbose logging for debugging
# Default: false
VERBOSE=false

# ========================================
# Notes
# ========================================
#
# Required Variables:
# - TAVILY_API_KEY (for search features)
# - CLOUDFLARE_API_TOKEN (for deployment only)
#
# Optional Variables:
# - All other variables have sensible defaults
# - Custom API URLs must be from allowed hosts (SSRF protection)
# - Rate limiting is enabled by default on HTTP transport
#
# Security:
# - Never commit .env file to version control
# - Rotate API keys regularly
# - Use environment-specific configurations
# - Enable rate limiting in production
#
# Documentation:
# - Full docs: https://github.com/cristianoaredes/mcp-dadosbr
# - Configuration guide: docs/CONFIGURATION.md
