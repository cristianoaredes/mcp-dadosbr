name = "mcp-dadosbr-aredes"
main = "build/lib/workers/mcp-agent.js"
compatibility_date = "2024-09-27"
compatibility_flags = ["nodejs_compat"]

# Durable Objects configuration for MCP Agent
[[migrations]]
tag = "v1"
new_sqlite_classes = ["DadosBRMCP"]

[[durable_objects.bindings]]
name = "MCP_OBJECT"
class_name = "DadosBRMCP"

# Custom domain configuration - Will be set up via Dashboard

[env.production]
name = "mcp-dadosbr-aredes-prod"

# Durable Objects for production
[[env.production.durable_objects.bindings]]
name = "MCP_OBJECT"
class_name = "DadosBRMCP"

[env.staging]
name = "mcp-dadosbr-aredes-staging"

# Durable Objects for staging
[[env.staging.durable_objects.bindings]]
name = "MCP_OBJECT"
class_name = "DadosBRMCP"

[env.staging.vars]
MCP_TRANSPORT = "http"
MCP_HTTP_PORT = "8787"
MCP_CACHE_SIZE = "256"
MCP_CACHE_TTL = "60000"

[[env.staging.kv_namespaces]]
binding = "MCP_CACHE"
id = "69470c08bd184c7ba625f09690c8a1e9"

[[env.staging.kv_namespaces]]
binding = "MCP_KV"
id = "69470c08bd184c7ba625f09690c8a1e9"

[env.production.vars]
MCP_TRANSPORT = "http"
MCP_HTTP_PORT = "8787"
MCP_CACHE_SIZE = "256"
MCP_CACHE_TTL = "60000"

[[env.production.kv_namespaces]]
binding = "MCP_CACHE"
id = "9e3f2b99610b4c67abb1080b5f927efa"

[[env.production.kv_namespaces]]
binding = "MCP_KV"
id = "9e3f2b99610b4c67abb1080b5f927efa"

# Environment variables for configuration (default)
[vars]
MCP_TRANSPORT = "http"
MCP_HTTP_PORT = "8787"
MCP_CACHE_SIZE = "256"
MCP_CACHE_TTL = "60000"

# Build configuration
[build]
command = "npm run build:worker"
cwd = "."
watch_dir = "lib"

# KV namespace for caching (default)
[[kv_namespaces]]
binding = "MCP_CACHE"
id = "9e3f2b99610b4c67abb1080b5f927efa"

# KV namespace for rate limiting and general storage (default)
[[kv_namespaces]]
binding = "MCP_KV"
id = "9e3f2b99610b4c67abb1080b5f927efa"
preview_id = "69470c08bd184c7ba625f09690c8a1e9"